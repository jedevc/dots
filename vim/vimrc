" evim will already have done these settings
if v:progname =~? 'evim'
  finish
endif

" get defaults
source $VIMRUNTIME/defaults.vim

" plugins
call plug#begin('~/.vim/plugged')

  " editing
  Plug 'tpope/vim-sleuth'
  Plug 'jiangmiao/auto-pairs'

  " snippets
  Plug 'SirVer/ultisnips'
  Plug 'honza/vim-snippets'

  " GUI stuff
  Plug 'Valloric/YouCompleteMe'
  Plug 'scrooloose/nerdtree'
  Plug 'airblade/vim-gitgutter'
  Plug 'vim-airline/vim-airline'
  Plug 'vim-airline/vim-airline-themes'

call plug#end()

" backups
if has('vms')
  set nobackup
else
  set nobackup
  set writebackup
  if has('persistent_undo')
    set undofile
    set undodir=$HOME/.vim/undo//
  endif
endif

" swap
set directory=$HOME/.vim/swap//
set updatetime=100

if &t_Co > 2 || has('gui_running')
  " switch on highlighting the last used search pattern.
  set hlsearch
endif

if has('autocmd')
  augroup vimrcEx
  au!

  autocmd FileType text setlocal textwidth=78

  augroup END
else
  set autoindent
endif

" matchit
if has('syntax') && has('eval')
  packadd! matchit
endif

" gutter
set number
map <C-n> :NERDTreeToggle<CR>

" theming
colorscheme custom

let g:airline_theme='term'
if !has('gui_running')
  let g:airline_powerline_fonts = 1
endif

" autocompletion
set completeopt=menu,longest,preview
let g:ycm_filetype_blacklist={}
let g:ycm_autoclose_preview_window_after_insertion=1

" snippets
" expand ultisnips on enter when the menu is open
let g:UltiSnipsExpandTrigger="<Insert>"

set tabstop=4
set shiftwidth=4
